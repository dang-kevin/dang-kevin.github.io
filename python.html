<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Python Projects</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.0.13/css/fa-svg-with-js.css" rel="stylesheet" />
<script src="site_libs/font-awesome-5.0.13/js/fontawesome-all.min.js"></script>
<script src="site_libs/font-awesome-5.0.13/js/fa-v4-shims.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');
  // mark it active
  menuAnchor.parent().addClass('active');
  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {
    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');
    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;
    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">
#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}
.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}
div.main-container {
  max-width: 1300px;
}
div.tocify {
  width: 20%;
  max-width: 280px;
  max-height: 85%;
}
@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}
@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}
.tocify ul, .tocify li {
  line-height: 20px;
}
.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}
.tocify .list-group-item {
  border-radius: 0px;
}
</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">



<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Kevin Dang</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-folder-open"></span>
     
    Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="rmarkdown.html">
        <span class="fa fa-code"></span>
         
        R Markdown
      </a>
    </li>
    <li>
      <a href="python.html">
        <span class="fa fa-code"></span>
         
        Python
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About me
  </a>
</li>
<li>
  <a href="files/Resume_Kevin_Dang.pdf">
    <span class="fa fa-file-pdf-o"></span>
     
    Resume
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<h1 class="title toc-ignore">Projects Overview</h1>

</div>

<p>This page will contain projects completed using (mostly) Python. I personally prefer to use Jupyter Notebook and Spyder as part of the Anaconda distribution. Here is a useful <a href="https://s3.amazonaws.com/assets.datacamp.com/blog_assets/PythonForDataScience.pdf"> Python for data science cheatsheet</a>.</p>


<div id="datacamp" class="section level1">
<h1>DataCamp Projects</h1>

<p>Below are <a href='https://www.datacamp.com/'>DataCamp</a> projects that I have worked on in Python, R and SQL using Jupyter Notebook. </p>
<ul>
 <li><a href='files/sharpe_ratio.html'>Risk and Returns: The Sharpe Ratio</a> (Python)</li> 
 <li><a href='files/credit_card.html'>Predicting Credit Card Approvals</a> (Python)</li>
 <li><a href='files/bank_debts.html'>Which Debts Are Worth the Bank's Effort?</a> (Python)</li>
 <li><a href='files/degrees.html'>Degrees That Pay You Back</a> (R)</li>  
 <li><a href='files/kaggle_survey.html'>Exploring the Kaggle Data Science Survey</a> (R)</li> 
 <li><a href='files/superbowl.html'>TV, Halftime Shows, and the Big Game</a> (PostgreSQL)</li> 
</ul>


</div>


<div id="radius-of-earth" class="section level1">
<h1>Radius of the Earth</h1>

<h2>Introduction</h2>
<p>The objective of this experiment was to deduce the radius of the Earth. This was achieved by measuring the variation of gravity using a Sodin gravimeter on different floors of the Burton tower. The height of each floor was also taken into account. In the results section we worked with the full dataset containing all floors, and only floors 3 to 13 as the results for these floors were expected to produce better results, which is explained in the results section. The estimated values for the radius of the Earth were in an acceptable range of error.</p>
<p>Some equations relevant to this experiment include:</p>
<p>Variation of g on Earth: <span class="math inline">\( \frac{\Delta g}{g} = -2\frac{\Delta R}{R}\Rightarrow R = -2g\frac{\Delta R}{\Delta g} \)</span></p>
<p>Gravitational attraction of the floor: <span class="math inline">\( g' = G\cdot\frac{m_{floor}}{R^2_{to floor}} \)</span></p>
<p>Error propagation for division (and multiplication): <span class="math inline">\( \sigma_z = z\sqrt{(\frac{\sigma_x}{x})^2 + (\frac{\sigma_y}{y})^2} \)</span></p>

<h2>Experimental Procedure</h2>
<ol>
<li>Starting from the basement, place the gravimeter near the elevators and adjust the levels properly.</li>
<li>After making the final fine adjustment by viewing through the eye-piece, record the counter reading.</li>
<li>Repeat this step for all floors (1 to 14) and take two datasets to obtain a reference for an uncertainty value in the readings.</li>
<li>Estimate the heights of the basement and first floor by counting the number of bricks and measuring each one with a ruler.</li>
</ol>

<h2>Results</h2>
<h3>Important Values</h3>
<ul>
<li>Gravimeter constant for conversion to mgal: <span class="math inline">\(0.1055\)</span></li>
<li>Basement Height: <span class="math inline">\(5.10m\)</span></li>
<li>Floor 1 Height: <span class="math inline">\(5.44m\)</span></li>
<li>Floors 2-14 Height: <span class="math inline">\(3.95m\)</span></li>
<li>Mass of each floor (excluding basement and roof): <span class="math inline">\( \approx 10^{6}kg \)</span></li>
<li>Gravity in Burton tower Floor 1: <span class="math inline">\(g = 9.804253m/s^{2}\)</span></li>
<li>Literature value for radius of Earth in Toronto: <span class="math inline">\(6368km\)</span></li>
<li>Gravimeter reading error: 3 units <span class="math inline">\(\Rightarrow 3\times\frac{0.10055}{1000\times100} = 3.0165\times10^{-6}m/s^2\)</span></li>
</ul>
<p>Let's start the analysis by importing some modules, loading the data, and defining parameters.</p>


<pre class="python"><code>import numpy as np
import matplotlib.pyplot as plt
from scipy.optimize import curve_fit
    
# Load the data, and only keep the 2nd parameter which gravitational reading.
_, reading, _ = np.loadtxt('gravity_test_1.txt',skiprows=1,unpack=True)

gravity = reading * 0.10055 / 1000 / 100  #convert to m/s^2

# The gravimeter reading error was 3 units. Conversion done in "Important Values" section
error1 = np.array([3*0.10055/1000/100 for x in range(len(reading))])  #convert error to m/s^2

building_heights = np.array([5.1]+[5.44]+[3.95]*13)
height1 = np.array([sum(building_heights[0:i])-building_heights[0] for i in range(15)])
</code></pre>

<h3>All floors</h3>
<p>First let's work with the entire dataset, and afterward we will try only floors 3 to 13.</p>


<pre class="python"><code>#Linear Function
def linear(x,a,b):
    return a*x + b

#Reduced chi-squared
#Note that error represents the error of the DEPENDENT variable.
def chisq_red(x,y,slope,intercept,error):
    squares = []
    for i in range(len(x)):
        val = y[i] - linear(x[i],slope,intercept)
        val /= error[i]
        squares.append(val**2)
    return 1/(len(x)-2) * sum(squares)


#Fit an initial model with all floors
popt1, pcov1 = curve_fit(linear, height1, gravity1, sigma=error1)

plt.figure(figsize=(10,6))
plt.scatter(height1,gravity1,label='Data')
plt.errorbar(height1,gravity1,yerr=error1,fmt='none',ecolor='lime',label='Error')
plt.plot(height1,linear(height1,popt1[0],popt1[1]),color='orange',label='Linear fit')
plt.xlabel('Height(m)')
plt.ylabel('Gravitational Reading(m/s^2)')
plt.ylim(0.000530,0.00075)
plt.title('Gravitational Reading vs Height (All floors)')
plt.legend()
plt.savefig('gravity-height1.pdf')
plt.show()

print('\nEquation: g =',popt1[0],'* R +',popt1[1],'\n')

chi1 = chisq_red(height1,gravity1,popt1[0],popt1[1],error1)
print('Reduced chi-squared =',chi1,'\n')

a_err1 = np.sqrt(pcov1[0,0])
radius1 = -2*9.804253/popt1[0]
radius_err1 = radius1*np.sqrt((a_err1/popt1[0])**2)
print('Radius via curve fit of all floors:',radius1,'+/-',radius_err1,'\n')
</code></pre>


<div class="output_png output_subarea ">
<img src="Pictures/radius2.png">
</div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Equation: g = -3.095144651119709e-06 * R + 0.00072264549726612 

Reduced chi-squared = 0.7147988905123464 

Radius via curve fit of all floors: 6335247.043431836 +/- 77021.52698732736 
</pre>
</div>

<p>Equation: <span class="math inline">\(\Delta g = (-3.095\times10^{-6})\Delta R + 722 \times 10^{-6}\)</span></p>
<p>Reduced chi-squared: <span class="math inline">\(\chi^{2}_{red} = 0.7147\)</span></p>
<p>Plotting a graph of <span class="math inline">\(\Delta g\)</span> vs <span class="math inline">\(\Delta R\)</span>, we obtain a slope which represents <span class="math inline">\(\frac{\Delta g}{\Delta R}\)</span>, so to calculate R, we can use the rearranged first equation from the introduction:</p>
<p>\begin{align*}
R = -2g\frac{\Delta R}{\Delta g} = \frac{-2g}{\frac{\Delta g}{\Delta R}} = \frac{-2(9.804253)}{-3.095\times10^{-6}} = 6335247 \pm 77022m
\end{align*}</p>
<p>The literature value for the radius of the Earth in Toronto is about 6368000m, so our result is smaller by about 32753m or 0.51%, which is well within our uncertainty range. The reduced chi-squared value is a bit low which suggests potential overfitting to the data. This is not surprising considering the fact that there are only 15 data points. The goodness of fit is not great but we obtained acceptable results. In the next section we work with floors 3 to 13 so there will be even fewer data points!</p>

<h3>Floors 3 to 13</h3>


<pre class="python"><code>#Index floors 3 to 13
height2 = np.array([x*3.95 for x in range(11)])
gravity2 = gravity1[3:14]
error2 = error1[3:14]

#Fit a second model containing only floors 3 to 13
popt2, pcov2 = curve_fit(linear, height2, gravity2, sigma=error2)

plt.figure(figsize=(10,6))
plt.scatter(height2,gravity2,label='Data')
plt.errorbar(height2,gravity2,yerr=error2,fmt='none',ecolor='lime',label='Error')
plt.plot(height2,linear(height2,popt2[0],popt2[1]),color='orange',label='Linear fit')
plt.xlabel('Height(m)')
plt.ylabel('Gravitational Reading(m/s^2)')
plt.ylim(0.000550,0.0007)
plt.title('Gravitational Reading vs Height (Floors 3-13)')
plt.legend()
plt.savefig('gravity-height2.pdf')
plt.show()

print('\nEquation: g =',popt2[0],'* R +',popt2[1],'\n')

chi2 = chisq_red(height2,gravity2,popt2[0],popt2[1],error2)
print('Reduced chi-squared =',chi2,'\n')

a_err2 = np.sqrt(pcov2[0,0])
radius2 = -2*9.804253/popt2[0]
radius_err2 = radius2*np.sqrt((a_err2/popt2[0])**2)


print('Radius via curve fit of floors 3-13:',radius2,'+/-',radius_err2)
</code></pre>


<div class="output_png output_subarea ">
  <img src="Pictures/radius3.png">
</div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>
Equation: g = -3.064624051799916e-06 * R + 0.00069381610572303 

Reduced chi-squared = 0.3943799925458971 

Radius via curve fit of floors 3-13: 6398339.786077031 +/- 95467.91164591063
</pre>
</div>

<p>Equation: <span class="math inline">\(\Delta g = (-3.065\times10^{-6})\Delta R + 694 \times 10^{-6}\)</span></p>
<p>Reduced chi-squared: <span class="math inline">\(\chi^{2}_{red} = 0.394\)</span></p>
<p>Plotting a graph of <span class="math inline">\(\Delta g vs\)</span> <span class="math inline">\(\Delta R\)</span>, we obtain a slope which represents <span class="math inline">\(\frac{\Delta g}{\Delta R}\)</span>, so to calculate R, we can use the rearranged first equation from the introduction:</p>
<p>\begin{align*}
R = -2g\frac{\Delta R}{\Delta g} = \frac{-2g}{\frac{\Delta g}{\Delta R}} = \frac{-2(9.804253)}{-3.065\times10^{-6}} = 6398340 \pm 95468m
\end{align*}</p>
<p>The literature value for the radius of the Earth in Toronto is about 6368000m, so our result is larger by about 30340m or 0.48%, which is well within our uncertainty range. The reduced chi-squared is quite low, which is due to the small number of data points used in the model. Although the goodness of fit is not as good as the previous model containing data points for every floor, the estimated value for the radius of the Earth obtained with this model is more accurate. This is likely due to the fact that the basement (floor 0) is a missing mass, and the heights of the basement and first floor are not standard so we were required to estimate the heights by counting bricks and measuring with a ruler, which is not very accurate. The fourteenth floor was also excluded since it only had the roof above it, and the mass of the roof is smaller than the mass of the floors.</p>

<h2>Conclusion</h2>
<p>The second model gave an estimate for the radius of the Earth of about 6398km using the gravimeter was within about 30km or 0.48% of the literature value of 6368km. This result was obtained using only floors 3 to 13, which represented our "best" data since there was an issue with different heights and masses at certain floors, which were excluded from the model. The goodness of fit was not great since there were few data points (limited by the number of floors in the Burton Tower), but the result turned out to be acceptable. The first model which included all floors also yielded an acceptable result which had an error 0.51% and a decent goodness of fit compared to our second model since it had more data points, but it was not quite as accurate as our second model due to the reasons mentioned above.</p>



</div>

<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>